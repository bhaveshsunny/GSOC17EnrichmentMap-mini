<!DOCTYPE html>
<html>
	<head>
	    <meta charset="utf-8">
	    <meta http-equiv="X-UA-Compatible" content="IE=edge">
	    <meta name="viewport" content="width=device-width, initial-scale=1">
		<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" integrity="sha384-+ENW/yibaokMnme+vBLnHMphUYxHs34h9lpdbSLuAwGkOKFRl4C34WkjazBtb7eT" crossorigin="anonymous">
		<link rel="stylesheet" type="text/css" href="./css/style.css">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
		<script src="https://code.highcharts.com/highcharts.js"></script>
		<script src="https://code.highcharts.com/modules/exporting.js"></script>
		<script src="https://unpkg.com/babel-core@5.8.38/browser.min.js"></script>
		<script src="https://unpkg.com/react@15/dist/react.js"></script>
		<script src="https://unpkg.com/react-dom@15/dist/react-dom.js"></script>	
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
		<script src="./js/main.js"></script>
		<script type="text/babel" >
			class Barplot extends React.Component {
				constructor(props) {
					super(props);
				}

				componentDidMount() {

				}

				componentWillUnmount() {

				}
			}

			var TaskList = React.createClass({
			    deleteElement:function(){
			    },

			    render: function(){
			    
			        var displayTask  = function(task, taskIndex){
			            console.log("NEW ADDED TASK"+task);
			    
			            return 
			           
				            <tr key={taskIndex}>
					                <td >
					                    {taskIndex}
					
					                </td>
					                <td>
					                	{task}
					                </td>
					                <td>
					                	<button onClick={this.props.deleteTask} value={taskIndex} href="#" className="btn btn-default">
					                		<span className="glyphicon glyphicon-remove"></span> Remove 
					                	</button>
					                </td></tr>
			            ;
			        };
			    
			        return <tbody>
			            {this.props.items.map((task, taskIndex) => 
			            	<tr key={taskIndex}>
					                <td >
					                    {taskIndex}
					
					                </td>
					                <td>
					                	{task}
					                </td>
					                <td>
					                	<button onClick={this.props.deleteTask} value={taskIndex} href="#" className="btn btn-default">
					                		<span className="glyphicon glyphicon-remove"></span> Remove 
					                	</button>
					                </td>
				            	</tr>
			            )}
			        </tbody>;
			    }
			 });
									
			var TaskApp = React.createClass({
			    getInitialState: function(){
			        return {
			             items: ['bcl2','abc'],
			             task: ''
			        }
			    },
			    
			    deleteTask: function(e) {
			        var taskIndex = parseInt(e.target.value, 10);
			        this.setState(state => {
			            state.items.splice(taskIndex, 1);
			            return {items: state.items};
			        });
			    },

			    onChange: function(e) {
			        this.setState({ task: e.target.value });
			    },



			    addTask:function (e){
			        this.setState({
			            items: this.state.items.concat([this.state.task]),
			    
			            task: ''
			        })
			    
			        e.preventDefault();
			    },

			    render: function(){ 
			        return(
			            <div>		            
			      			<form id="genelist" onSubmit={this.addTask}>
					      	  <div className="form-group">
							    <label htmlFor="exampleInputEmail1">Genes List</label>
							    <input onChange={this.onChange} value={this.state.task} type="text" className="form-control" id="exampleInputEmail1" placeholder="Gene">
							    </input>
							  </div>
							  <button type="submit" className="btn btn-default">Add</button>
					      	</form>			            
			      			<table className="table table-striped table-bordered">
								<thead>
									<tr>
										<td>#</td>
										<td>Gene Name</td>
										<td>Remove</td>
									</tr>
								</thead>
								<TaskList items={this.state.items} deleteTask={this.deleteTask} />
							</table>
						</div>			            
			        );
			    }
			});

			class EMdemo extends React.Component {
			  constructor(props) {
			    super(props);
			    this.state = {date: new Date()};
			  }

			  componentDidMount() {
			    this.timerID = setInterval(
			      () => this.tick(),
			      1000
			    );
			  }

			  componentWillUnmount() {
			    clearInterval(this.timerID);
			  }

			  tick() {
			    this.setState({
			      date: new Date()
			    });
			  }

			  render() {
			    return (
			    	<div>
				    	<div className="row">
				      		<div className="col-lg-4 col-md-4 col-xs-4">
								<TaskApp />
				      		</div>
				      		<div className="col-lg-4 col-md-4 col-xs-4">
				      			<h1>Hello, world!</h1>
				        		<h2>It is {this.state.date.toLocaleTimeString()}.</h2>
				      		</div>
				        	<div className="col-lg-4 col-md-4 col-xs-4">
								
				        	</div>
				      	</div>
			      	</div>
			    );
			  }
			}

			ReactDOM.render(
			  <EMdemo />,
			  document.getElementById('demo')
			);
		</script>
	</head>
	<body>
	<nav class="navbar navbar-default">
	  <div class="container-fluid">
	    <div class="navbar-header">
	      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
	        <span class="sr-only">Toggle navigation</span>
	        <span class="icon-bar"></span>
	        <span class="icon-bar"></span>
	        <span class="icon-bar"></span>
	      </button>
	      <a class="navbar-brand" href="#">Enrichment Map demo</a>
	    </div>

	    <!-- Collect the nav links, forms, and other content for toggling -->
	    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
	      <ul class="nav navbar-nav">
	        <li><a href="#">Home<span class="sr-only">(current)</span></a></li>
	      </ul>
	   
	    </div>
	  </div>
	</nav>
	<div id="demo" class="container-fluid">

	</div>
	<div id="barplot"></div>
	</body>
</html>